22강
은행 예시
컨트롤러 -> 창구 은행 직원(존재하는 회원인지 유효성 검사)
서비스 -> 전산 처리(대출이 가능한지 전산처리)
리포지터리 -> DB와 소통하여 전산 결과 저장을 도움

제일 처음 컨트롤러를 만들고 컨트롤러에서 서비스를 필드로 소환하여 클래스 추가

23강
스프링 컨테이너(jsp, db에서의 컨테이너와는 다름)

홈
멤버
- 컨트롤러
- 서비스
- 리포지터리
- DTO -> Entity
  JPA

HomeController에서 MemberService가 필요한 상황이라면?
컨트롤러에서 리포지터리 소환하면 안됨!! 서비스 수준에서만 소환 가능
컨트롤러는 리포지터리에 명령을 내릴 수 없다. 서비스를 거쳐야 가능함. 계층 간의 관계.

현재 구조
[HomeController] [MemberController] 둘다 [MemberService]가 필요한 상황
home, memberController에서 각각 만드는 것은 메모리 낭비
memberService 만들 때 memberRepository가 같이 만들어지고 있는 상황(생성자 메서드)
각각 memberService 소환할 때마다 memberRepository도 각각 만들어지고 있는 상황
=> HomeController에서 MemberService를 호출하는 것은 좋지 않다
- 그러나 가끔 다른 컨트롤러에서 다른 서비스를 만드는 경우 발생하기도 함(지금처럼)
  => 그럼 스프링 컨테이너를 이용해 객체를 공유하는 방법이 있다

24강
스프링 컨테이너 사용

스프링부트 안에는 내부적으로 컨테이너가 존재한다 = IOC 컨테이너(공용도구상자)
memberService를 IOC 컨테이너에서 만들어준다
사용할 때마다 IOC 컨테이너에서 가져와서 쓰면 되니까

원래는 Controller 클래스에 new를 해서 객체 생성했는데
Service 맨 위에 @Component, Controller에 @Autowired로 객체 생성하면
매번 new로 객체 생성을 하지 않아도 Component를 Service에 써주면 스프링부트가 알아서 new해준다. 그러기 위해 사전 등록을 하는 것 = @Component
그러나, @Service, @Controller에 이미 @Component가 들어있음

Ioc컨테이너에 의해 서비스를 관리하겠다 -> 변수 위에 @Autowired만 붙여주면 됨
**생성자 주입과 필드 주입 == 객체생성을 Ioc컨테이너에 맡김 = 생성자주입을 더 많이 씀
@AllArgsConstructor을 사용하면 생성자주입도 생략 가능

25강
생성자 주입을 권장(의존성 주입)
- 필드 주입은 생성시점이 모호하여 nullPointException 발생하기도 함. 생성자 주입은 생성시점이 정확함(객체 생성시)
- 필드 주입은 final 키워드가 붙지 않아 해당 변수의 값이 수정될 여지도 있음
- 생성자 주입은 final 키워드가 붙어서 수정을 잠근다
- 생성자 주입을 쓰면 롬복(@AllArgsConstructor)로 쓸 수 있으니 편리

26강
로그인 처리과정 반드시 기억**

1. 프로그램 실행
2. HomeController 객체가 제일 먼저 만들어진다
- @Controller로 인해 Ioc컨테이너가 생성해준다
    - MemberService 객체 생성
        - MemberRepository 객체 생성
3. MemberController 객체 생성(이미 HomeController에 의해 MemberService, MemberRepository가 만들어져서 다시 만들어지지 않고 주소값만 공유하게 됨)
4. 고객이 /member/login?username=user1&password=1234 요청
5. MemberController::login 메서드 실행
- memberService::tryLogin 메서드 실행
    - memberRepository::findByUserName 메서드 실행
    - memberRepository::findByUserName 메서드 응답
- memberService::tryLogin 메서드 응답
6. MemberController::login 메서드 응답
7. 응답이 브라우저로 전송


27강
쿠키 이용해서 로그인 상태 구현

[브라우저1] [브라우저2] <-> SBB
서버는 브라우저를 기억하지 못 한다
로그인의 표시를 남겨야함

login해서 브라우저에서 쿠키 확인해보면 loginedMemberId의 값이 잘 발행된 것을 확인 가능